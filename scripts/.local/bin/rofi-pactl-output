#!/bin/bash

if [[ -n "$DIPLAY" ]]; then
    rofi_cmd="rofi -dmenu -config ~/.config/rofi/config-select.rasi -no-show-icons"
elif [[ -n "$WAYLAND_DISPLAY" ]]; then
    rofi_cmd="wofi --dmenu -no-show-icons"
fi

source="$(pactl list short sinks | cut -f 2 | $rofi_cmd -p "Change audio:")"
inputs="$(pactl list sink-inputs short | cut -f 1)"

for input in $inputs; do
    pactl move-sink-input "$input" "$source"
done

pactl set-default-sink "$source"
